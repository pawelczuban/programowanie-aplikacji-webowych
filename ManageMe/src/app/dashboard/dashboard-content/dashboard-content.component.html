<div class="dashboard-content-wrapper">
    <div *ngFor="let project of projectList">
        <div class="project-title">
            <h1>{{ project.title }}</h1>
        </div>
        <div class="project-description">
            <p>{{ project.description }}</p>
        </div>
        <div class="project-details">
            <div class="functionalities card">
                <div class="functionalities-header w-100">
                    <h2 class="titles mx-4">Functionalities</h2>
                    <div>
                        <button type="button" class="btn btn-outline-success"
                            (click)="openAddDialogFunctionalities()">Add</button>
                    </div>
                </div>
                <div class="functionalities-name" *ngFor="let functionality of loadProjects">
                    <div class="functionality-info">
                        <p class="functionalities-list">{{ functionality.name }}</p>
                        <p class="functionalities-status">Status: {{functionality.state}}</p>
                    </div>
                    <div class="functionality-actions">
                        <button type="button" class="btn btn-outline-success"
                            (click)=" openAddDialogTasks(functionality.functionalityID)">Add Task</button>
                        <button type="button" class="btn btn-outline-warning"
                            (click)="openEditDialogFunctionalities(functionality)">Edit</button>
                        <button type="button" class="btn btn-outline-danger"
                            (click)="deleteFunctionality(functionality.functionalityID)">Delete</button>
                    </div>
                </div>
            </div>
            <div class="tasks card">
                <div class="tasks-header w-100">
                    <h2 class="titles">Tasks</h2>
                </div>

                <div *ngFor="let functionality of loadProjects">
                    <p class="functionalities-task-list">
                        {{ functionality.name }}
                    </p>
                    <div *ngFor="let task of functionality.tasks">
                        <div class="task-state-list">
                            <div>
                                {{ task.name }}
                            </div>
                            <div>
                                <select class="task-state" [(ngModel)]="task.state" (change)="saveToLocal($event.target, task)">            
                                    <option value="To Do">To do</option>
                                    <option value="Doing">Doing</option>
                                    <option value="Done">Done</option>
                                </select>
                            </div>
                            <button type="button" class="btn btn-outline-warning functionality-actions"
                                (click)="openEditDialogTasks(functionality.functionalityID, task.taskID)">Edit</button>
                            <button type="button" class="btn btn-outline-danger"
                                (click)="deleteTask(functionality.functionalityID, task.taskID)">Delete</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>